{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>KebabHouse mixApetit</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static '' %}assets/img/favicon.png" rel="icon">
  <link href="{% static '' %}assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static '' %}assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="{% static '' %}assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="{% static '' %}assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Top Bar ======= -->
  <div id="topbar" class="d-flex align-items-center fixed-top">
    <div class="container d-flex justify-content-center justify-content-md-between">

      <div class="contact-info d-flex align-items-center">
        <a href="tel:+420736602552">
        <i class="bi bi-phone d-flex align-items-center"><span> 736 602 552</span></i>
        </a>
        <i class="bi bi-clock d-flex align-items-center ms-4"><span> Po-Ne: 10AM - 22PM</span></i>
        {% if user.is_authenticated %}
        <li class="nav-item dropdown notification-section">
          <a href="#" class="notification dropdown-toggle" id="navbarDropdown" role="button"
              data-bs-toggle="dropdown" aria-expanded="true">
              <span><i class='fa fa-bell'></i></span>
              <span class="badge" id="badge">0</span>
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown" id="messages"
              data-popper-placement="bottom-end"
              style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate3d(-70px, 42px, 0px);">
              
              
              <li class="dropdown-item"></li>
              <hr class="dropdown-divider">
              
               <li class='dropdown-item'></li>
              <hr class="dropdown-divider"> 
              
          </ul>
      </li>
      {% endif %}

      </div>

    </div>
  </div>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-cente">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">

      <h1 class="logo me-auto me-lg-0"><a href="{% url 'home' %}">KebabHouse</a><a style="color: darkgoldenrod;" class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal">Order now!</a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo me-auto me-lg-0"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a class="nav-link scrollto active" href="{% url 'home' %}#hero">Domov</a></li>
          <li><a class="nav-link scrollto" href="{% url 'home' %}#about">O nás</a></li>
          <li><a class="nav-link scrollto" href="{% url 'home' %}#menu">Menu</a></li>
          <li><a class="nav-link scrollto" href="{% url 'home' %}#specials">Speciality</a></li>
          <li><a class="nav-link scrollto" href="{% url 'home' %}#gallery">Galerie</a></li>
          </li>
          <li><a class="nav-link scrollto" href="{% url 'home' %}#contact">Kontakt</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
      <a class="btn btn-warning scrollto d-none d-lg-flex" data-bs-toggle="modal" data-bs-target="#exampleModal">Objednat teď</a>

    </div>
  </header><!-- End Header -->
  <!-- Modal -->
<div  style="color: rgb(88, 0, 88);" class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div style="margin: auto;

      text-align: center;"  class="modal-header">
        
        <h5 class="modal-title" id="exampleModalLabel"><div class="section-title">
          <h2>větví</h2>
          <p>Vyberte pobočku</p>
        </div></h5>
      </div>
      <div style="margin: auto;text-align: center;"  class="modal-body">
        <section id="chefs" class="chefs">
          <div class="container" data-aos="fade-up">
    
            
    
           
    
                <div class="member" data-aos="zoom-in" data-aos-delay="100">
                  <img src="{% static '' %}assets/img/address1.jpg" class="img-fluid" alt="">
                  <div class="member-info">
                    <div class="member-info-content">
                      <h4>Branch 1</h4>
                      <span>Pražská 69</span>
                    </div>
                    <div class="social">
                      <a href="{% url 'order' %}"><button class="btn btn-warning">Vybrat</button></a>
                    </div>
                  </div>
                </div>
    
                <div class="member" data-aos="zoom-in" data-aos-delay="200">
                  <img src="{% static '' %}assets/img/gallery/gallery-4.jpg" class="img-fluid" alt="">
                  <div class="member-info">
                    <div class="member-info-content">
                      <h4>Branch 2</h4>
                      <span>Address 2</span>
                    </div>
                    <div class="social">
                      <a href="{% url 'orderb' %}"><button class="btn btn-warning">Vybrat</button></a>
                    </div>
                  </div>
                </div>
    
    
    
          </div>
        </section><!-- End Chefs Section -->

        
    

     
      </div>
      <div class="modal-footer">
        <button style="background-color: rgba(41, 10, 37, 0.955);" type="button" class="btn btn-secondary" data-bs-dismiss="modal">zavřít</button>
      </div>
    </div>
  </div>
</div>
 <!-- ======= End Modal Section ======= -->



  <main id="main">
    <br>
    <br>
    <br>


        <!-- ======= Book A Table Section ======= -->
        <section id="book-a-table" class="book-a-table">
            <div class="container" data-aos="fade-up">
      
              <div class="section-title">
                <h2>Rezervace</h2>
                <p>Rezervujte si jídlo</p>
              </div>
      
              <form id="order-form" action="{% url 'order2' %}" method="post" role="form" class="php-email-form" data-aos="fade-up" data-aos-delay="100">
                {% csrf_token %}
                <div class="row">
                  <div class="col-lg-4 col-md-6 form-group">
                    <input type="text" name="name" class="form-control" id="name" placeholder="Tvé jméno" data-rule="minlen:4" data-msg="Please enter at least 4 chars">
                    <div class="validate"></div>
                  </div>
                  <div class="col-lg-4 col-md-6 form-group mt-3 mt-md-0">
                    <input type="text" class="form-control" name="phone" id="phone" placeholder="tvé číslo" data-rule="minlen:4" data-msg="Please enter at least 4 chars">
                    <div class="validate"></div>
                  </div>
                  <label for="item1">vybrat jídlo:</label>       

                    <select class="form-control " style="width: 45%;" name="item1">
                      <option value="">jídlo</option>
                      {% for a in p %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select> &nbsp;&nbsp;
                    <input type="number" class="form-control" style="width: 15%; float: right;" name="q1" id="q1" placeholder="ks"  data-msg="zadejte množství">
                    &nbsp;&nbsp;

                    <select class="form-control " style="width: 35% ; float: right;" name="sos1">
                      <option value="">omáčka</option>
                      {% for a in s %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select>
                    <label for="item2">vybrat jídlo:</label>
                    <select class="form-control " style="width: 45%;" name="item2">
                      <option value="">jídlo</option>
                      {% for a in p %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select> &nbsp;&nbsp;
                    <input type="number" class="form-control" style="width: 15%; float: right;" name="q2" id="q2" placeholder="ks"  data-msg="zadejte množství">
                    &nbsp;&nbsp;
                    <select class="form-control " style="width: 35% ; float: right;" name="sos2">
                      <option value="">omáčka</option>
                      {% for a in s %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select>
                    <label for="item3">vybrat jídlo:</label>
                    <select class="form-control " style="width: 45%;" name="item3">
                      <option value="">jídlo</option>
                      {% for a in p %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select> &nbsp;&nbsp;
                    <input type="number" class="form-control" style="width: 15%; float: right;" name="q3" id="q3" placeholder="ks"  data-msg="zadejte množství">
                    &nbsp;&nbsp;
                    <select class="form-control " style="width: 35% ; float: right;" name="sos3">
                      <option value="">omáčka</option>
                      {% for a in s %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select>
                    <label for="item4">vybrat jídlo:</label>
                    <select class="form-control " style="width: 45%;" name="item4">
                      <option value="">jídlo</option>
                      {% for a in p %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select> &nbsp;&nbsp;
                    <input type="number" class="form-control" style="width: 15%; float: right;" name="q4" id="q4" placeholder="ks"  data-msg="zadejte množství">
                    &nbsp;&nbsp;
                    <select class="form-control " style="width: 35% ; float: right;" name="sos4">
                      <option value="">omáčka</option>
                      {% for a in s %}
                      <option value="{{a.name}}">{{a.name}}</option>
                      {% endfor %}
                    </select>

                    
                  <div class="col-lg-4 col-md-6 form-group mt-3">
                    <label for="time">v kolik hodin to potřebuješ?</label>

                    <input type="time" name="date_needed" class="form-control" id="date-needed" placeholder="" data-rule="minlen:4" data-msg="Please enter at least 4 chars">
                    <div class="validate"></div>
                  </div>
                </div>
                <div class="form-group mt-3">
                  <textarea class="form-control" name="msg" rows="5" placeholder="Popis"></textarea>
                  <div class="validate"></div>
                </div>
                <div class="text-center"><button type="submit">Odeslat objednávku</button></div>
              </form>
      
            </div>
          </section><!-- End Book A Table Section -->
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>
    const form = document.getElementById('order-form');
  form.addEventListener("submit",submitHandler);
  function submitHandler(e) {
      var serializedData = $(this).serialize();
      e.preventDefault();
      $.ajax({
          type: 'POST' , 
          url : '{% url "order2" %}',
          data: serializedData  ,
          dataType: 'json',
          success: function (data) {
              if (data.msg === 'Success') {
                  alert('dostali jsme vaši zprávu, děkujeme!(Success)');
                  $("#order-form").trigger('reset');
        } else {

          alert('neplatná forma! Zkus to znovu (failed)');
        }
      }
   })
  }
  
  </script>
      {% if user.is_authenticated %}

      <script type="text/javascript">
        let url = `ws://${window.location.host}/ws/socket-server/`
  
        const chatSocket = new WebSocket(url)
  
        chatSocket.onmessage = function(e){
            let data = JSON.parse(e.data)
            console.log('Data:', data)
  
            if(data.type === 'chat'){
                let messages = document.getElementById('messages')
                let badge = document.getElementById('badge')
                const song = "{% static '' %}assets/img/notif.mp3";
                new Audio(song).play();   
  
                messages.insertAdjacentHTML('beforeend', `<div>
                                        <p>${data.message}</p>
                                    </div>`)
                badge.innerText = 'New Order!!!'  
               
            }
        }
  
        let form2 = document.getElementById('order-form')
        form2.addEventListener('submit', (e)=> {
            e.preventDefault()
            
            let message = 'u hv new order' 
            chatSocket.send(JSON.stringify({
                'message':message
            }))
                           
            form2.reset()
        })
  
    </script>
     {% else %}
     <script type="text/javascript">
      let url = `ws://${window.location.host}/ws/socket-server/`
  
      const chatSocket = new WebSocket(url)
  
      chatSocket.onmessage = function(e){
          let data = JSON.parse(e.data)
          console.log('Data:', data)
  
          if(data.type === 'chat'){
              let messages = document.getElementById('messages')
              let badge = document.getElementById('badge')
  
              messages.insertAdjacentHTML('beforeend', `<div>
                                      <p>${data.message}</p>
                                  </div>`)
              badge.innerText = 'New Order!!!'  
             
          }
      }
  
      let form2 = document.getElementById('order-form')
      form2.addEventListener('submit', (e)=> {
          e.preventDefault()
          
          let message = 'u hv new order' 
          chatSocket.send(JSON.stringify({
              'message':message
          }))
                         
          form2.reset()
      })
  
  </script>
  {% endif %}
  

      


    <!-- ======= Menu Section ======= -->
    <section id="menu" class="menu section-bg">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Menu</h2>
          <p>Podívejte se na naše chutné menu</p>
        </div>

        <div class="row" data-aos="fade-up" data-aos-delay="100">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="menu-flters">
              <li data-filter="*" class="filter-active">Všechno</li>
              {% for a in c %}
              <li data-filter=".filter-{{a.number}}">{{a.name}}</li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="row menu-container" data-aos="fade-up" data-aos-delay="200">

          {% for a in p %}

          <div class="col-lg-6 menu-item filter-{{a.category.number}}">
            <img src="{{a.imageURL}}" class="menu-img" alt="">
            <div class="menu-content">
              <a href="#">{{a.name}}</a><span>{{a.price}}</span>
            </div>
            <div class="menu-ingredients">
              {{a.info}}
            </div>
          </div>
          {% endfor %}

        </div>

      </div>
    </section><!-- End Menu Section -->






  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>KebabHouse mixApetit</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Designed by <a href="https://instagram.com/ashkansarshari">AshkanSarshari</a>
      </div>
    </div>
  </footer><!-- End Footer -->
  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static '' %}assets/vendor/aos/aos.js"></script>
  <script src="{% static '' %}assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="{% static '' %}assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="{% static '' %}assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="{% static '' %}assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="{% static '' %}assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="{% static '' %}assets/js/main.js"></script>

</body>

</html>